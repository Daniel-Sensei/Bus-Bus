<ion-content>
  <div #map id="map"></div>

  <ion-button *ngIf="isModalOpen == false" (click)="setOpen(true)" slot="fixed">Visualizza nei dintorni</ion-button>

  <ion-modal
      #modal
      trigger="open-modal"
      [isOpen]="isModalOpen"
      [initialBreakpoint]="0.25"
      [breakpoints]="[0.00, 0.25, 0.35, 0.5, 0.65, 0.75, 0.85, 0.95]"
      [backdropDismiss]="false"
      [backdropBreakpoint]="0.95"
      [handle]="true"
      [cssClass]="'modal-above-tabs'"
    >
      <ng-template>
        <ion-content class="ion-padding modal-content">

           <!-- Contenuto del modal -->
      <!-- Assicurati che il contenuto abbia un'altezza fissa -->
      <div class="modal-scroll-content">

          <ion-list *ngIf="selectedSegment === 'default'">
            <!-- Segmento ancorato sopra la lista delle fermate -->
            <ion-segment value="default" (ionChange)="segmentChanged($event)" class="top-segment">
              <ion-segment-button value="default">
                <ion-label>Fermate</ion-label>
              </ion-segment-button>
              <ion-segment-button value="segment">
                <ion-label>Bus</ion-label>
              </ion-segment-button>
            </ion-segment>
        
            <!-- Lista delle fermate -->
            <ion-item *ngFor="let fermata of filteredStops">
              {{ fermata.name }}
            </ion-item>
          </ion-list>
        
          <ion-list *ngIf="selectedSegment === 'segment'">
            <!-- Segmento ancorato sopra la lista dei bus -->
            <ion-segment value="default" (ionChange)="segmentChanged($event)" class="top-segment">
              <ion-segment-button value="default">
                <ion-label>Fermate</ion-label>
              </ion-segment-button>
              <ion-segment-button value="segment">
                <ion-label>Bus</ion-label>
              </ion-segment-button>
            </ion-segment>
        
            <!-- Lista dei bus -->
            <ion-item *ngFor="let bus of autobus">
              {{ bus }}
            </ion-item>
          </ion-list>
          </div>

        </ion-content>
      </ng-template>
    </ion-modal>

</ion-content>